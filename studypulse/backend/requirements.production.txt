# ── StudyPulse Backend - Production Dependencies ──

# ============ CORE FRAMEWORK ============
fastapi>=0.109.0
uvicorn[standard]>=0.27.0
gunicorn>=21.2.0  # Production WSGI server
python-multipart>=0.0.6

# ============ DATABASE ============
# SQLAlchemy async ORM
sqlalchemy[asyncio]>=2.0.25

# Database drivers
aiosqlite>=0.19.0  # SQLite for dev/testing
asyncpg>=0.29.0  # PostgreSQL async driver (production)
psycopg2-binary>=2.9.9  # PostgreSQL sync driver (backup)

# ============ AUTHENTICATION & SECURITY ============
# JWT and password hashing
python-jose[cryptography]>=3.3.0
passlib[bcrypt]>=1.7.4
bcrypt>=4.0.1

# Validation
pydantic[email]>=2.7.0
pydantic-settings>=2.3.0
email-validator>=2.1.0

# Supabase Auth integration
supabase==2.3.4
gotrue==2.0.0

# Rate limiting
slowapi>=0.1.9

# ============ HTTP & NETWORKING ============
httpx>=0.26.0  # Async HTTP client for Ollama

# ============ VECTOR SEARCH & AI ============
# Full vector database (heavy)
qdrant-client>=1.12.0
fastembed>=0.4.0

# Lightweight alternative (HNSW-based)
hnswlib>=0.8.0
numpy>=1.24.0

# ============ CACHING ============
redis>=5.0.1  # Async Redis client

# ============ LOGGING & MONITORING ============
python-json-logger>=2.0.7
sentry-sdk[fastapi]>=1.40.0  # Error tracking and APM

# ============ CONFIGURATION ============
python-dotenv>=1.0.0

# ============ PDF PROCESSING ============
pypdf>=3.0.0
pdfplumber>=0.11.0
reportlab>=4.0.0

# ============ WEB SCRAPING (Optional - consider removing if unused) ============
beautifulsoup4>=4.12.0
lxml>=5.0.0
# selenium>=4.15.0  # COMMENTED OUT - heavyweight, rarely needed in production
# playwright>=1.40.0  # COMMENTED OUT - heavyweight, rarely needed in production

# ============ TESTING DEPENDENCIES ============
pytest>=7.4.0
pytest-asyncio>=0.21.0
pytest-cov>=4.1.0
pytest-xdist>=3.3.0  # Parallel execution
pytest-timeout>=2.1.0
pytest-mock>=3.11.0
coverage[toml]>=7.3.0
locust>=2.15.0  # Load testing
faker>=19.0.0  # Test data generation

# ============ CODE QUALITY (Dev only) ============
black>=23.7.0
flake8>=6.1.0
mypy>=1.5.0
pylint>=2.17.0
bandit>=1.7.5
safety>=2.3.0
isort>=5.12.0

# Type stubs
types-redis>=4.6.0
types-passlib>=1.7.7

# ============ PRODUCTION NOTES ============
# For Railway deployment:
# 1. gunicorn for process management
# 2. asyncpg for PostgreSQL (Supabase)
# 3. sentry-sdk for error tracking
# 4. slowapi for rate limiting
# 5. supabase for auth integration
#
# Optional for cost optimization:
# - Remove selenium/playwright if not using PDF scraping
# - Remove qdrant-client if using pageindex only
# - Remove testing deps in production image (multi-stage Docker build)
